<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Monitoring Honor</title>
  <link rel="icon" type="image/x-icon" href="images/logobps.png"/>

  <!-- CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.bootstrap.min.css" />
  <link rel="stylesheet" href="css/font-awesome.min.css" />
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/blue.css" title="blue">

  <style>
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .header, .footer {
      background: linear-gradient(to right, #003366, #000000);
      color: white;
      padding: 15px 0;
      text-align: center;
    }
    .container {
      flex: 1;
    }
    table.dataTable tbody td {
      vertical-align: middle;
    }

	          /* --- Tambahan untuk membuat tabel fit ke halaman --- */
    .dataTables_wrapper {
      width: 100%;
      overflow-x: auto; /* munculkan scroll jika tabel terlalu lebar */
    }

    table.dataTable {
      width: 100% !important; /* paksa lebar penuh */
      table-layout: auto;     /* kolom menyesuaikan isi */
      word-wrap: break-word;  /* teks panjang otomatis wrap */
      white-space: normal;    /* hilangkan nowrap bawaan */
    }
  </style>
</head>
<body>


  <section id="service-page">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h1 class="service-title">DAFTAR PENGAJUAN PEMBAYARAN HONOR</h1>
          <div class="service-aro-icon">
            <div class="service-aro-left"></div>
              <i class="fa fa-gift"></i>
            <div class="service-aro-right"></div>
          </div>
          <h1> </h1>
          <p>Daftar honor yang telah diterima pengajuan pembayarannya dan akan segera diproses pengajuan ke KPPN</p>
        </div>

        <div class="col-lg-12">
		  <h4 class="text-center mb-4" id="packageName"></h4>

		  <div class="form-group col-xs-6 col-sm-4">
		    <label for="optionsDropdown">Pilih Jenis Monitoring:</label>
		    <select class="form-control" id="optionsDropdown" onchange="redirectToLink()">
		      <option value="">-- Pilih Jenis Monitoring --</option>
		      <option value="honor">Honor</option>
		      <option value="translok">Translok/Perjadin</option>
		      <option value="bahan">Bahan</option>
		    </select>
		  </div>
		</div>

          <br><br>

          <!-- TABEL -->
          <table id="example" class="table table-striped table-bordered display responsive" style="width:100%">
            
          </table>

          <p id="passingGrade"></p>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 text-center">
          <p>&copy; 2025. Konten dibuat oleh <strong><a href="http://s.bps.go.id/jeumpa" target="_blank">Tim Jeumpa</a></strong></p>
        </div>
      </div>
    </div>
  </footer>

  <!-- JS: JANGAN DIBALIK URUTANNYA -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap.min.js"></script>
  <script src="https://cdn.datatables.net/fixedheader/3.2.0/js/dataTables.fixedHeader.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.9/js/responsive.bootstrap.min.js"></script>

  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  <script>
    function redirectToLink() {
      var select = document.getElementById("optionsDropdown");
      var value = select.value;

      switch (value) {
        case "honor":
          window.location.href = "monhonor.html";
          break;
        case "translok":
          window.location.href = "monperjadin.html";
          break;
        case "bahan":
          window.location.href = "monbahan.html";
          break;
        default:
          break;
      }
    }

    $(document).ready(function () {
      $("#example").DataTable({
        ajax: {
          url: "https://script.google.com/macros/s/AKfycbzTDaNofPwFQ4QT_f-8uSgmObw7FSvznW0gCyhNWFW5GMRA-9EcGiVK1MIeHrT_AgXl/exec",
          dataSrc: "data" // pastikan Apps Script mengembalikan { "data": [...] }
        },
        columns: [
          {
            title: "Waktu Pengiriman Pengajuan",
            data: "Submitted at",
            render: function (data, type, row) {
              if (type === 'display' && data) {
                const date = new Date(data);
                const options = {
                  year: 'numeric',
                  month: '2-digit',
                  day: '2-digit',
                  hour: '2-digit',
                  minute: '2-digit',
                  second: '2-digit',
                  hour12: false
                };
                return date.toLocaleString('id-ID', options).replace(',', '');
              }
              return data || '-';
            }
          },
          { title: "Nama Pengusul", data: "Nama Pengusul SPJ" },
          { title: "Kegiatan", data: "Tuliskan uraian kegiatan sesuai surat tugas" },
          {
            title: "Nilai Honor",
            data: "Nilai yang diajukan untuk pembayaran",
            render: function (data, type, row) {
              if (!data) return '-';
              return type === 'display'
                ? data.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
                : data;
            }
          }
        ],
		autoWidth: false,
        responsive: true,
        fixedHeader: true,
        pageLength: 10,
        language: {
          url: "https://cdn.datatables.net/plug-ins/1.11.3/i18n/id.json"
        }
      });
    });
  </script>
</body>
</html>

